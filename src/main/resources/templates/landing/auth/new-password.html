<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8"/>
    <title>Children Care - Appointment Booking System</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Premium Bootstrap 4 Landing Page Template"/>
    <meta name="keywords" content="Appointment, Booking, System, Dashboard, Health"/>
    <meta name="author" content="Shreethemes"/>
    <meta name="email" content="support@shreethemes.in"/>
    <meta name="website" content="https://shreethemes.in"/>
    <meta name="Version" content="v1.2.0"/>
    <!-- favicon -->
    <link rel="shortcut icon" href="../assets/images/favicon.ico.png">
    <!-- Bootstrap -->
    <link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <!-- Icons -->
    <link href="../assets/css/materialdesignicons.min.css" rel="stylesheet" type="text/css"/>
    <link href="../assets/css/remixicon.css" rel="stylesheet" type="text/css"/>
    <link href="https://unicons.iconscout.com/release/v3.0.6/css/line.css" rel="stylesheet">
    <!-- Css -->
    <link href="../assets/css/style.min.css" rel="stylesheet" type="text/css" id="theme-opt"/>

</head>

<body>
<!-- Loader -->
<div id="preloader">
    <div id="status">
        <div class="spinner">
            <div class="double-bounce1"></div>
            <div class="double-bounce2"></div>
        </div>
    </div>
</div>
<!-- Loader -->

<div class="back-to-home rounded d-none d-sm-block">
    <a th:href="@{/}" class="btn btn-icon btn-primary"><i data-feather="home" class="icons"></i></a>
</div>

<!-- Hero Start -->
<section class="bg-home d-flex bg-light align-items-center"
         style="background: url('../assets/images/bg/bg-lines-one.png') center;">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-5 col-md-8">
                <img src="../assets/images/logo-dark.png" height="24" class="mx-auto d-block" alt="">
                <div class="card login-page bg-white shadow mt-4 rounded border-0">
                    <div class="card-body">
                        <h4 class="text-center">Reset Password</h4>

                        <!--            <div th:if="${success == 'fail'}" class="alert alert-danger">-->
                        <!--              <strong>Danger!</strong> Wrong username or password !-->
                        <!--            </div>-->

                        <form id="reset-form" th:action="@{/reset_password}" class="login-form mt-4" method="post">
                            <input id="token" type="hidden" name="token" required="" th:value="${token}">

                            <div class="row">


                                <div class="col-lg-12">
                                    <div class="mb-3">
                                        <label class="form-label">Password <span class="text-danger">*</span></label>
                                        <input id="newPassword" type="password" class="form-control"
                                               placeholder="Password" name="newPassword" required="">
                                    </div>
                                </div>

                                <div class="col-lg-12">
                                    <div class="mb-3">
                                        <label class="form-label">Confirm password <span
                                                class="text-danger">*</span></label>
                                        <input id="confirm-password" type="password" class="form-control"
                                               placeholder="confirm-password" name="confirmPassword" required="">
                                    </div>
                                </div>

                                <div class="col-lg-12">
                                    <div class="d-flex justify-content-between">
                                        <div class="mb-3">
                                            <div class="form-check">
                                                <!--                                                        <input class="form-check-input align-middle" type="checkbox" value="" id="remember-check">-->
                                                <!--                                                        <label class="form-check-label" for="remember-check">Remember me</label>-->
                                            </div>
                                        </div>
                                        <!--                                                <a th:href="@{/hyhy}" class="text-dark h6 mb-0">Forgot password ?</a>-->
                                        <!--                                                <a th:href="@{/forgot}" class="text-dark h6 mb-0">Forgot password ?</a>-->

                                        <!--                                                   <a th:href="@{/register-email}" class="text-dark h6 mb-0">Forgot password ?</a>-->
                                        <!--                    <a th:href="@{/forgot_password}" class="text-dark h6 mb-2">Forgot password ?</a>-->

                                    </div>
                                </div>
                                <div class="col-lg-12 mb-0">
                                    <div class="d-grid">
                                        <button type="submit" value="Login" class="btn btn-primary">Reset</button>
                                        <!--                                                <input type="submit" value="Login" class="btn btn-primary">-->
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div><!---->
            </div> <!--end col-->
        </div><!--end row-->
    </div> <!--end container-->
</section><!--end section-->
<!-- Hero End -->

<!-- javascript -->
<script src="../assets/js/bootstrap.bundle.min.js"></script>
<!-- Icons -->
<script src="../assets/js/feather.min.js"></script>
<!-- Main Js -->
<script src="../assets/js/app.js"></script>
<!-- Valitadate import   -->
<script src="https://unpkg.com/just-validate@latest/dist/just-validate.production.min.js"></script>
<!--  code validate      -->

<!--Validate -->
<script src="../assets/js/jquery-3.2.1.min.js"></script>
<script src="../assets/js/additional-methods.js"></script>
<script src="../assets/js/jquery.validate.js"></script>
<script>
    //FULL NAME
    $.validator.addMethod("lettersOnly", function (value, element) {
        return this.optional(element) || /^[a-zA-Z\s]+$/.test(value);
    }, "This field must contain only letters and spaces");
    //PASSWORD NOT SPACE
    $.validator.addMethod("noSpace", function (value, element) {
        // return value.indexOf(" ") < 0;
        return /^\S+$/.test(value);
    }, "Password should not contain spaces.");
    //CONFIRM PASSWORD
    $.validator.addMethod("matchNewPassword", function (value, element) {
        return value === $("#newPassword").val();
    }, "Confirm password should match new password.");

    $.validator.addMethod("oneLessCharacter", function (value, element) {
        // return value.indexOf(" ") < 0;
        return /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z!@#$%^&*~\d]{8,}$/.test(value);
    }, "Password must has at least one character and one number.");

    $(document).ready(function () {
        $('#reset-form').validate({
            rules: {
                currentPassword: {
                    required: true,
                    minlength: 8,
                    // maxlength: 30,
                    // password: true,
                    noSpace: true,
                    oneLessCharacter: true

                },
                newPassword: {
                    required: true,
                    minlength: 8,
                    // maxlength: 30,
                    // password: true,
                    noSpace: true,
                    oneLessCharacter: true

                },
                confirmPassword: {
                    required: true,
                    minlength: 8,
                    // maxlength: 30,
                    // password: true,
                    noSpace: true,
                    equalTo: "#newPassword",
                    oneLessCharacter: true

                }
            },
            messages: {
                // currentPassword: {
                //     required: "Please enter your full name",
                //     minlength: "Your full name must be at least 8 characters long",
                //     maxlength: "Your full name must be less than or equal to 30 characters long"
                // },
                // newPassword: {
                //     required: "Please enter your email address",
                //     email: "Please enter a valid email address"
                // },
                // confirmPassword: {
                //     required: "Please enter a password",
                //     minlength: "Your password must be at least 8 characters long",
                //     maxlength: "Your password must be less than or equal to 30 characters long"
                // }
            },
            errorElement: 'span',
            errorClass: 'text-danger',
            highlight: function (element, errorClass, validClass) {
                $(element).addClass('is-invalid');
            },
            unhighlight: function (element, errorClass, validClass) {
                $(element).removeClass('is-invalid');
                $(element).addClass('is-valid');
            }
        });

        // $(document).ready(function () {
        //     var fileNameExists = false;
        //     $('#email').blur(function () {
        //         var email = $(this).val();
        //         $.ajax({
        //             url: '/user/checkEmailExists',
        //             type: 'GET',
        //             data: {email: email.toLowerCase()},
        //             success: function (response) {
        //                 if (response.exists) {
        //                     $('#emailMessage').html('<span style="color:red;">Email already exists!</span>');
        //                     fileNameExists = true;
        //                 } else {
        //                     $('#emailMessage').empty();
        //                     fileNameExists = false;
        //                 }
        //             }
        //             // ,
        //             // error: function() {
        //             //     alert('Error checking term name!');
        //             // }
        //         });
        //     });
        //     $('form').submit(function (event) {
        //         if (fileNameExists) {
        //             event.preventDefault();
        //             $('#emailMessage').html('<span style="color:red;">Email already exists!</span>');
        //         }
        //     });
        // });
    });

</script>
<!--<script>-->

<!--  // const validation = new JustValidate('#login-form', {-->
<!--  //   validateBeforeSubmitting: true,-->
<!--  // });-->
<!--  // // const validator = new JustValidate('#change-password');-->
<!--  // validation-->
<!--  //         .addField('#email', [-->
<!--  //           {-->
<!--  //             rule: 'required',-->
<!--  //           },-->
<!--  //           {-->
<!--  //             rule: 'email',-->
<!--  //           },-->
<!--  //         ])-->
<!--  //-->
<!--  //         .addField('#password', [-->
<!--  //           {-->
<!--  //             rule: 'minLength',-->
<!--  //             value: 8,-->
<!--  //           },-->
<!--  //           {-->
<!--  //             rule: 'maxLength',-->
<!--  //             value: 30,-->
<!--  //           },-->
<!--  //           {-->
<!--  //             rule: 'required',-->
<!--  //           },-->
<!--  //           {-->
<!--  //             rule: 'password',-->
<!--  //           }-->
<!--  //         ]);-->
<!--  //-->
<!--  //-->
<!--  //-->
<!--  // const formLogin = document.getElementById('login-form');-->
<!--  // formLogin.addEventListener('submit', function(event) {-->
<!--  //   event.preventDefault(); // Prevent the default form submission-->
<!--  //-->
<!--  //   // Perform any validation or additional logic here-->
<!--  //-->
<!--  //   // Submit the form using JavaScript-->
<!--  //   formLogin.submit();-->
<!--  // });-->

<!--</script>-->
</body>

</html>